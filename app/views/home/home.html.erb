



  <style>
    #map-canvas { width:500px; height:400px; }
    .layer-wizard-search-label { font-family: sans-serif };
  </style>
  <script type="text/javascript"
    src="http://maps.google.com/maps/api/js?sensor=false">
  </script>
  <script type="text/javascript">
    var map;
    var layer_0;
    var layer_1;
    var layer_2;
    function initialize() {
      map = new google.maps.Map(document.getElementById('map-canvas'), {
        center: new google.maps.LatLng(40.699687776922914, -73.98338185119633),
        zoom: 14,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      });
      layer_0 = new google.maps.FusionTablesLayer({
        query: {
          select: "col5",
          from: "1Z6PQZ8O27miCU5jCKLOuBIMTwIMUUwi6brKkt72N"
        },
        map: map,
        styleId: 2,
        templateId: 2
      });
      layer_1 = new google.maps.FusionTablesLayer({
        query: {
          select: "col2",
          from: "1ZZGZ14wv6g3sBG2Nks01rAXqwFOektYSXpBUlgTk"
        },
        map: map,
        styleId: 2,
        templateId: 2
      });
      layer_2 = new google.maps.FusionTablesLayer({
        query: {
          select: "col2",
          from: "1wUvoRFg1RkVGjJ6eYEFmfbJ8MNM0Obw6gu9Ng3Fu"
        },
        map: map,
        styleId: 2,
        templateId: 2
      });
    }
    google.maps.event.addDomListener(window, 'load', initialize);
  </script>


<h3> you searched:
<%= @user %>
</h3>
<h1> you're near <%= @parks.size %> <%=link_to "Parks", parks_path(param: @parks.each{|e|}) %>, and <%= @gardens.size %> Gardens.</h1>
<%
=begin
%>
<ol>
  <% @parks.each do |park| %>
  <li><%=park.park%></li>: <%= park.address %>
  <% end %>
</ol>
<%
=end
%>
<h1> and there are <%= @wifi.size %> wifi hotspots near you. </h1>
<%
=begin
%>
<ol>
  <% @wifi.each do |wifi| %>
  <li><%="#{wifi.name}, ssid: #{wifi.ssid}, #{wifi.provider}, #{wifi.wifi_type}"%></li>
  <% end %>
</ol>
<%
=end
%>
<script>
function initialize() {
  var bounds = new google.maps.LatLngBounds();
  var myCenter = new google.maps.LatLng(<%=@lat_lng["lat"]%>, <%=@lat_lng["lng"]%>);

    var mapProp = {
      center:myCenter,
      zoom:16,
      mapTypeId:google.maps.MapTypeId.ROADMAP
    };

  var map = new google.maps.Map(document.getElementById("googleMap"), mapProp);


  var marker = new google.maps.Marker({
      position: myCenter,
      map: map
    });


  <%@parks.each_with_index do |park, index| %>
    var marker=new google.maps.Marker({

        position:{lat:<%=park.latitude%>, lng: <%=park.longitude%>},
        icon: 'http://google.com/mapfiles/ms/micons/green-dot.png',
        map: map
        // label: "<%=index+1%>"
        // animation:google.maps.Animation.BOUNCE
     });
  <% end %>

  <%@gardens.each_with_index do |garden, index| %>
  <% if garden.latitude %>
    var marker=new google.maps.Marker({

        position:{lat:<%=garden.latitude%>, lng: <%=garden.longitude%>},
        icon: 'http://google.com/mapfiles/ms/micons/blue-dot.png',
        map: map
        // label: "<%=index+1%>"
        // animation:google.maps.Animation.BOUNCE
     });
  <% end %>
  <% end %>

  <% @wifi.each do |wifi| %>
  var marker=new google.maps.Marker({
    <% if wifi.latitude %>
        position:{lat:<%=wifi.latitude%>, lng: <%=wifi.longitude%>},
        icon: 'http://google.com/mapfiles/ms/micons/purple-dot.png',
        map: map
        // animation:google.maps.Animation.BOUNCE
     });
  <% end %>
  <% end %>
  }

google.maps.event.addDomListener(window, 'load', initialize);
</script>

    <div class="center" id="map-canvas"></div>

<div class="center" id="googleMap" style="width:700px;height:380px;align:center"></div>
